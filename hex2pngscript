from PIL import Image
import os
import tkinter as tk
from tkinter import simpledialog, messagebox

# Create the root window (this is necessary even though it's not shown)
root = tk.Tk()
root.withdraw()

# Get input using the simpledialog.askstring method
input_hex = simpledialog.askstring("input", "paste your hex code list here:")

if not input_hex:
     messagebox.showerror("error", "no input recorded!")
else:
    if "#" not in input_hex:
        messagebox.showerror("error", "make sure your hex codes contain # before their values!")
    else:
        # format input 
        input_hex = input_hex.replace("\n", " ")
        split_hex = input_hex.split()


        # Determine the user's download folder path
        download_folder = os.path.expanduser("~" + os.sep + "Downloads")


        # Create a new folder with an added integer in the Downloads directory
        output_dir_base = "hexbatch"
        i = 1
        output_dir = os.path.join(download_folder, output_dir_base)
        while os.path.exists(output_dir):
            output_dir = os.path.join(download_folder, f"{output_dir_base}({i})")
            i += 1
        os.makedirs(output_dir, exist_ok=True)


        # Loop through hex color codes and create images
        for i, hex_code in enumerate(split_hex):  
            image = Image.new("RGB", (500, 500), color=hex_code)
            image.save(os.path.join(output_dir, f"{i+1}_{hex_code.lstrip('#')}.png"))


        print("Check your downloads folder for your pngs!")
